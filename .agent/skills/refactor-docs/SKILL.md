---
name: refactor-docs
description: "프로젝트 문서들을 현재 상태와 비교 분석하여 불일치하는 내용을 찾아내고, 최신 구현 내용을 반영하여 리팩토링합니다."
---

# 문서 리팩토링 스킬

에이전트는 이 스킬을 사용하여 프로젝트 문서들이 실제 코드 및 구현 상태와 일치하도록 유지합니다.

## 실행 절차 (순서 엄수)

### 1. 문서 전체 읽기 및 분석
다음 핵심 문서들을 **모두** 읽고 내용을 파악합니다:
- `docs/CONTEXT_SNAPSHOT.md`: 현재 운영 기준 스냅샷
- `docs/AGENTS.md`: 프로젝트 원칙 및 에이전트 지침
- `docs/TROUBLESHOOTING.md`: 트러블슈팅 가이드
- `docs/DEV_HISTORY.md`: 개발 히스토리 (시행착오 기록)
- `docs/NEXT_STEPS.md`: 다음 단계 작업 가이드
- `README.md`: 프로젝트 개요

### 2. 불일치 항목 분석
각 문서를 읽으면서 다음 항목들을 체크합니다:

**기술적 불일치:**
- [ ] 폐기된 기술/방식이 여전히 주요 방법으로 설명되어 있는가? (예: OCR 방식 → 코드 기반 선택)
- [ ] 변경된 구현 방식이 반영되지 않았는가? (예: 핸들 기반 → 인덱스 기반)
- [ ] 새로운 해결책이 문서에 누락되었는가? (예: Win32 API 우선 전략)

**상태 불일치:**
- [ ] 완료된 작업이 "진행 중" 또는 "대기"로 표시되어 있는가?
- [ ] 우선순위가 현재 상황과 맞지 않는가?
- [ ] 필수 요구사항이 변경되었는가? (예: Tesseract OCR 필수 → 선택)

**SSoT 불일치:**
- [ ] SSoT 위치가 변경되었는데 문서에 반영되지 않았는가?
- [ ] 새로운 도구/파일이 SSoT로 지정되었는데 누락되었는가?

**맥락 불일치:**
- [ ] 프로젝트 방향과 맞지 않는 내용이 있는가?
- [ ] 현재 단계와 동떨어진 설명이 있는가?

### 3. 리팩토링 계획 수립
발견된 불일치 항목들을 정리하고 TODO 리스트를 작성합니다:
```
- doc1: CONTEXT_SNAPSHOT.md 리팩토링 (인덱스 기반 방식 반영)
- doc2: NEXT_STEPS.md 리팩토링 (현재 진행 상황 반영)
- doc3: TROUBLESHOOTING.md 리팩토링 (최신 해결책 반영)
- doc4: DEV_HISTORY.md 업데이트 (최근 작업 기록)
- doc5: README.md 업데이트 (프로젝트 현황 반영)
```

### 4. 문서별 리팩토링 수행

#### 4.1 CONTEXT_SNAPSHOT.md
- **제거**: 폐기된 방식 설명 (예: OCR 관련 내용 축소)
- **추가**: 최신 구현 방식 상세 설명
- **갱신**: 완료된 작업 상태 반영
- **명확화**: SSoT 위치 및 도구 명시

#### 4.2 NEXT_STEPS.md
- **제거**: 완료된 작업 또는 보류된 우선순위
- **갱신**: 체크리스트 상태 업데이트
- **추가**: 다음 단계 로드맵
- **명확화**: 작업 흐름 및 순서

#### 4.3 TROUBLESHOOTING.md
- **대폭 수정**: 변경된 해결 전략 섹션 전면 개편
- **추가**: 최신 해결책 및 코드 예시
- **갱신**: 적용 완료 사례
- **명확화**: 핵심 원칙 및 교훈

#### 4.4 DEV_HISTORY.md
- **추가**: 최근 작업 기록 (날짜별)
- **상세화**: 시행착오 과정 및 해결 방법
- **교훈**: 각 항목에서 배운 점 명시

#### 4.5 README.md
- **제거**: 변경된 필수 요구사항
- **갱신**: 프로젝트 상태 및 버전
- **간소화**: 불필요한 단계 제거
- **업데이트**: 개발 로드맵 체크리스트

### 5. 일관성 검증
모든 문서가 다음 사항에서 일치하는지 확인합니다:
- [ ] 기술 용어 및 방식 (예: "인덱스 기반 하이브리드 방식")
- [ ] SSoT 위치 (예: `test_field_mapper.py`)
- [ ] 프로젝트 상태 (예: "진료 확인서 자동화 완료")
- [ ] 다음 단계 (예: "다른 증명서 확장")

### 6. 요약 보고
리팩토링 완료 후 사용자에게 다음 내용을 보고합니다:

**수정된 문서 목록:**
- 각 문서별 주요 변경 사항 요약

**주요 개선 사항:**
- 프로젝트 방향 명확화
- SSoT 위치 명확화
- 최신 해결책 반영
- 불필요한 내용 제거

**문서 일관성 확보:**
- 모든 문서가 현재 프로젝트 상태를 정확히 반영함을 확인

## 출력 규칙
- 각 문서별 변경 사항을 구체적으로 명시합니다
- "제거", "추가", "갱신", "명확화" 등 액션 동사를 사용합니다
- 코드 예시나 구체적인 내용을 포함하여 설명합니다
- 최종 보고는 체계적이고 읽기 쉽게 작성합니다

## 주의사항
- **전체 문서 읽기 필수**: 일부만 읽고 판단하지 않습니다
- **실제 코드 확인**: 문서 내용이 실제 구현과 일치하는지 코드를 확인합니다
- **SSoT 원칙 준수**: 중복 정보는 제거하고 SSoT 위치만 명시합니다
- **맥락 유지**: 프로젝트의 전체 방향과 일관성을 유지합니다
- **완전한 수정**: 부분적 수정이 아닌 섹션 전체를 재작성합니다

## 트리거 상황
다음과 같은 상황에서 이 스킬을 사용합니다:
- 사용자가 "문서들을 리팩토링해줘" 요청
- 사용자가 "문서가 맞지 않는 것 같아" 지적
- 사용자가 "프로젝트 방향과 벗어난 내용 수정" 요청
- 주요 구현 방식 변경 후 문서 동기화 필요
- 새로운 대화에서 문서 불일치 발견

## 성공 기준
- ✅ 모든 핵심 문서가 현재 구현 상태를 정확히 반영
- ✅ 폐기된 방식이나 내용이 완전히 제거됨
- ✅ 최신 해결책과 전략이 상세히 문서화됨
- ✅ SSoT 위치가 명확히 표시됨
- ✅ 문서 간 일관성 확보
- ✅ 새로운 에이전트가 문서만 읽고 프로젝트를 이어갈 수 있음
